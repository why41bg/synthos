# Synthosï¼šæ™ºèƒ½èŠå¤©è®°å½•å…¨é“¾è·¯åˆ†æç³»ç»Ÿ

## é¡¹ç›®ç®€ä»‹

Synthos æ˜¯ä¸€ä¸ªåŸºäº `Node.js` å’Œ `TypeScript` æ„å»ºçš„æ™ºèƒ½èŠå¤©è®°å½•åˆ†æç³»ç»Ÿï¼Œä¸“æ³¨äº QQ èŠå¤©è®°å½•çš„å…¨é“¾è·¯æ•°æ®å¤„ç†ä¸ AI æ€»ç»“åŠŸèƒ½ã€‚é¡¹ç›®é‡‡ç”¨ç°ä»£åŒ–çš„ monorepo æ¶æ„ï¼Œèåˆè‡ªç„¶è¯­è¨€å¤„ç†ã€å‘é‡æ¨¡å‹ã€ä»»åŠ¡è°ƒåº¦ä¸ Web å‰ç«¯å±•ç¤ºï¼Œä¸ºç”¨æˆ·æä¾›ä»åŸå§‹èŠå¤©è®°å½•å¯¼å…¥ã€ä¸Šä¸‹æ–‡ç†è§£ã€å…´è¶£åº¦åˆ†æåˆ°å¯è§†åŒ–æ‘˜è¦è¾“å‡ºçš„ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆã€‚

æ— è®ºæ˜¯ä¸ªäººç”¨æˆ·å¸Œæœ›å›é¡¾é‡è¦å¯¹è¯ï¼Œè¿˜æ˜¯å›¢é˜Ÿç®¡ç†è€…éœ€è¦æ´å¯Ÿç¾¤èŠè¶‹åŠ¿ï¼ŒSynthos éƒ½èƒ½é€šè¿‡ AI èµ‹èƒ½ï¼Œè®©æµ·é‡èŠå¤©ä¿¡æ¯å˜å¾—å¯è¯»ã€å¯æŸ¥ã€å¯ç†è§£ã€‚

---

## ç•Œé¢å±•ç¤º

äº®è‰²æ¨¡å¼ï¼š  
![äº®è‰²æ¨¡å¼](./docs/assets/å‰ç«¯æˆªå›¾2.webp)

æš—é»‘æ¨¡å¼ï¼š  
![æš—é»‘æ¨¡å¼](./docs/assets/å‰ç«¯æˆªå›¾1.webp)

ç»†èŠ‚äº¤äº’ï¼š  
![ç»†èŠ‚](./docs/assets/å‰ç«¯æˆªå›¾3.webp)

ç¾¤ç»„ç®¡ç†ç•Œé¢ï¼š  
![ç¾¤ç»„ç®¡ç†](./docs/assets/å‰ç«¯æˆªå›¾4.webp)

---

## ç³»ç»Ÿæ¶æ„

![ç³»ç»Ÿæ¶æ„å›¾](./docs/assets/Synthosæ¶æ„7.drawio.png)

---

## æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§

- **æ™ºèƒ½é¢„å¤„ç†**ï¼šè‡ªåŠ¨åˆ†ç»„ã€ä¸Šä¸‹æ–‡æ‹¼æ¥ã€å¼•ç”¨æ¶ˆæ¯è¿½è¸ª
- **AI æ‘˜è¦ç”Ÿæˆ**ï¼šåŸºäº äº‘ç«¯/æœ¬åœ° æ¨¡å‹ç”Ÿæˆé«˜è´¨é‡å¯¹è¯æ‘˜è¦
- **å…´è¶£åº¦æŒ‡æ•°**ï¼šç”¨æˆ·å¯è®¾ç½®å…³é”®è¯åå¥½ï¼Œç³»ç»Ÿä¸ºæ¯ä¸ªè¯é¢˜æ‰“åˆ†æ’åºï¼ˆæ”¯æŒè´Ÿå‘åé¦ˆï¼‰
- **å†å²è®°å½•è‡ªåŠ¨æ‹‰å–**ï¼šæ”¯æŒå¢é‡åŒæ­¥ä¸å†å²å›æº¯
- **æ—¥æŠ¥è‡ªåŠ¨ç”Ÿæˆ**ï¼šæ¯æ—¥æ±‡æ€»é«˜ä»·å€¼è®¨è®ºå†…å®¹
- **å¤šç¾¤ç»„ç®¡ç†**ï¼šçµæ´»é…ç½®ä¸åŒç¾¤ç»„çš„åˆ†æç­–ç•¥

> **TODOæ„¿æœ›å•**  
>
> - [WIP] è½¬å‘èŠå¤©è®°å½•è·Ÿéš  
> - âœ… å·²å®Œæˆ å¼•ç”¨èŠå¤©è®°å½•è·Ÿéš  
> - [WIP] ä¸»åŠ¨æ‹‰å–å†å²èŠå¤©è®°å½•ï¼ˆâš ï¸ç›®å‰æŠ€æœ¯å®ç°é‡åˆ°å›°éš¾ï¼‰
> - [WIP] æ¯å¤©ç”Ÿæˆæ—¥æŠ¥  
> - âœ… å·²å®Œæˆ å…´è¶£åº¦æŒ‡æ•°ï¼šç”¨æˆ·ç»™å‡ºè‡ªå·±çš„å…´è¶£åå¥½ï¼ˆå…³é”®è¯æ ‡ç­¾ç»„ï¼‰ï¼Œç³»ç»Ÿæ ¹æ®ç”¨æˆ·çš„å…´è¶£åå¥½ä¸ºæ¯ä¸ªè¯é¢˜æ‰“åˆ†ï¼Œæ’åºåæ¨èç»™ç”¨æˆ·ã€‚ï¼ˆç”¨æˆ·ä¹Ÿå¯ä»¥æ ‡è®°ä¸å–œæ¬¢çš„è¯é¢˜ï¼Œæ­¤æ—¶è¯é¢˜å¾—åˆ†ä¸ºè´Ÿæ•°ï¼‰

---

## æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

- **ğŸ§‘â€ğŸ’»è¯­è¨€**ï¼šTypeScript + Node.jsï¼ˆæœªæ¥å¯èƒ½å¼•å…¥ Python + grpc ğŸ¤”?ï¼‰
- **ğŸ¯é¡¹ç›®ç®¡ç†**ï¼šPnpm + Monorepo  
- **ğŸ“šæ•°æ®åº“**ï¼šMongoDBï¼ˆä»»åŠ¡è°ƒåº¦ï¼‰ + SQLiteï¼ˆèŠå¤©è®°å½• & aiç”Ÿæˆæ•°æ®å­˜å‚¨ï¼‰ + LevelDBï¼ˆKVå…ƒæ•°æ®å­˜å‚¨ï¼‰
- **ğŸ§å‘é‡è¯­ä¹‰æ¨¡å‹**ï¼š`bge-large-zh-v1.5`ï¼ˆæœ¬åœ° ONNX å‘é‡åŒ–ï¼‰ï¼Œç”¨äºå…´è¶£æ‰“åˆ†å’Œ RAG
- **ğŸ¤–LLMæ¡†æ¶**ï¼šLangchainï¼Œæ”¯æŒä»»æ„äº‘ç«¯ LLM or æœ¬åœ°çš„ Ollama
- **ğŸ•—ä»»åŠ¡è°ƒåº¦ä¸ç¼–æ’æ¡†æ¶**ï¼šAgenda.js  
- **ğŸ§ªå•å…ƒæµ‹è¯•æ¡†æ¶**ï¼šVitest  
- **ğŸŒWeb åç«¯æ¡†æ¶**ï¼šExpress.js
- **âš›ï¸Web å‰ç«¯æ¡†æ¶**ï¼šReact + ECharts + HeroUI

### æ¨¡å—åˆ’åˆ†

| æ¨¡å— | èŒè´£ |
|------|------|
| `data-provider` | ä» QQ ç­‰ IM å¹³å°è·å–åŸå§‹èŠå¤©è®°å½• |
| `preprocessing` | æ¸…æ´—ã€åˆ†ç»„ã€ä¸Šä¸‹æ–‡æ‹¼æ¥ã€å¼•ç”¨è§£æ |
| `ai-model` | æ–‡æœ¬å‘é‡åŒ–ã€ä¸»é¢˜æå–ã€æ‘˜è¦ç”Ÿæˆã€å…´è¶£åº¦è®¡ç®— |
| `webui-backend` | æä¾› RESTful APIï¼Œæ”¯æŒç¾¤ç»„ç®¡ç†ã€æ¶ˆæ¯æŸ¥è¯¢ã€ç»“æœè·å– |
| `common` | å…±äº«ç±»å‹å®šä¹‰ã€é…ç½®ç®¡ç†ã€æ•°æ®åº“å·¥å…·ã€æ—¥å¿—ç³»ç»Ÿ |

---

## å¿«é€Ÿå¼€å§‹

> âš ï¸ **ç¡¬ä»¶è¦æ±‚**  
>
> - ç”±äºéœ€åœ¨æœ¬åœ°è¿è¡Œ BGE å‘é‡æ¨¡å‹ï¼ˆå³°å€¼å†…å­˜å ç”¨çº¦ 11GBï¼‰ï¼ŒåŠ ä¸Š MongoDBã€Node è¿›ç¨‹å’Œ SQLite å®ä¾‹ï¼Œ**å»ºè®®å†…å­˜ â‰¥16GBï¼Œæ¨è 32GB æˆ– 64GB**ã€‚
> - CPU éšæ„ã€‚
> - å¤Ÿç”¨çš„ç¡¬ç›˜ç©ºé—´ã€‚

![ç¡¬ä»¶è¦æ±‚](./docs/assets/hardware.png)

### 1. ç¯å¢ƒå‡†å¤‡

#### å®‰è£… MongoDB

é¡¹ç›®ä¾èµ– Agenda è¿›è¡Œä»»åŠ¡è°ƒåº¦ï¼Œéœ€æå‰å®‰è£… [MongoDB ç¤¾åŒºç‰ˆ](https://www.mongodb.com/try/download/community) å¹¶ç¡®ä¿æœåŠ¡æ­£åœ¨è¿è¡Œã€‚

#### ä¸‹è½½ BGE å‘é‡æ¨¡å‹

ä¸‹è½½ `bge-large-zh-v1.5` çš„ ONNX æ ¼å¼æ¨¡å‹ï¼š

```bash
# huggingfaceå³ä½¿å¼€äº†æ¢¯å­ä¹Ÿå·¨æ…¢ï¼Œæ¨èé•œåƒç«™ or ä½¿ç”¨å¤šçº¿ç¨‹ä¸‹è½½å™¨åŠ é€Ÿ
https://huggingface.co/Xenova/bge-large-zh-v1.5/resolve/main/onnx/model.onnx
```

ä¸‹è½½åæ”¾ç½®åˆ°ä»¥ä¸‹è·¯å¾„ï¼š

```
æ ¹ç›®å½•/node_modules/.pnpm/@huggingface+transformers@3.7.6/node_modules/@huggingface/transformers/.cache/Xenova/bge-large-zh-v1.5/onnx/
```

#### å‡†å¤‡é…ç½®æ–‡ä»¶

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `synthos_config.json`ï¼Œæ ¼å¼è¯·å‚è€ƒ [`./common/config/@types/GlobalConfig.ts`](d:\FR_Projects\synthos\common\config\@types\GlobalConfig.ts)ã€‚  
QQ æ•°æ®åº“å¯†é’¥é…ç½®æ–¹æ³•è¯¦è§ï¼š[https://docs.aaqwq.top/](https://docs.aaqwq.top/)

> ğŸ’¡ **è¿ç»´å»ºè®®**ï¼šæ•°æ®æ— ä»·ï¼Œé¡¹ç›®è¿è¡Œä¸­äº§ç”Ÿçš„ SQLite å’Œ LevelDB æ•°æ®åº“å»ºè®®å®šæœŸæ‰§è¡Œâ€œ3-2-1â€å¤‡ä»½ç­–ç•¥ï¼ˆ3ä»½å‰¯æœ¬ã€2ç§ä»‹è´¨ã€1ä»½å¼‚åœ°ï¼‰ï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±ã€‚

### 2. å¯åŠ¨é¡¹ç›®

```bash
# 1. æ ¹ç›®å½•å®‰è£…ä¸»ä¾èµ–
pnpm i

# 2. è¿›å…¥ data-provider å­é¡¹ç›®å¹¶å®‰è£…ä¾èµ–
cd apps/data-provider
pnpm i

# 3. è¿”å›æ ¹ç›®å½•ï¼Œå¯åŠ¨æ‰€æœ‰æœåŠ¡
cd ../..
npm run dev
```

æœåŠ¡å¯åŠ¨åï¼Œå¯é€šè¿‡ä»¥ä¸‹æ–¹å¼éªŒè¯ï¼š

- WebUI åç«¯ï¼š`http://localhost:3002`
- å¥åº·æ£€æŸ¥æ¥å£ï¼š`GET /health`

---

## API ä¸å‰ç«¯å¼€å‘

- **API æ–‡æ¡£**ï¼šè¯¦è§ [`apps/webui-backend/docs/APIæ–‡æ¡£.md`](d:\FR_Projects\synthos\apps\webui-backend\docs\APIæ–‡æ¡£.md)
- **å‰ç«¯å¼€å‘æŒ‡å¼•**ï¼šè¯¦è§ [`apps/webui-backend/docs/å‰ç«¯å¼€å‘æŒ‡å¼•æ–‡æ¡£.md`](d:\FR_Projects\synthos\apps\webui-backend\docs/å‰ç«¯å¼€å‘æŒ‡å¼•æ–‡æ¡£.md)

æ ¸å¿ƒæ¥å£åŒ…æ‹¬ï¼š

- `GET /api/group-details`ï¼šè·å–ç¾¤ç»„åˆ—è¡¨
- `GET /api/chat-messages-by-group-id`ï¼šæŒ‰ç¾¤ç»„æŸ¥è¯¢æ¶ˆæ¯
- `GET /api/ai-digest-result-by-topic-id`ï¼šè·å– AI æ‘˜è¦ç»“æœ
- `GET /api/is-session-summarized`ï¼šæ£€æŸ¥ä¼šè¯æ˜¯å¦å·²æ€»ç»“

---
